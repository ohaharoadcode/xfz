function Log(i){this._init(i)}Log.prototype={_init:function(i){this.auth=i.auth,this.login=this.auth.find(".login"),this.register=this.auth.find(".register"),this.close=this.register.find(".close"),this.display_btn=i.display_btn},display_init:function(){var i=this;this.auth.find("error").each(function(){this.innerText=""}),this.auth.find(".verify-div img").each(function(){i.change_verifycode(this)})},displayclick:function(){var i=this;this.display_btn.click(function(){i.display_init(),i.auth.css("display","block"),$("body").css("overflow","hidden")})},closeclick:function(){var i=this;this.close.click(function(){i.auth.css("display","none"),$("body").css("overflow","visible")})},change_verifycode:function(i){var e=i.getAttribute("src");e=e.split("?")[0],i.setAttribute("src",e+"?"+Math.random())},verifycode_click:function(){var i=this;this.auth.find(".verify-div img").click(function(){i.change_verifycode(this)})},login_tran_data:function(){this.login.find("#login-submit").click(function(i){i.preventDefault(),$(".auth .login .error").each(function(){this.innerText=""});var e=$("#login_telephone").val(),t=$("#login_password").val(),n=$("#login_img_verify").val(),s=$("#login_remember").prop("checked");xfz_ajax.post({url:"/account/login",data:{telephone:e,password:t,img_verify:n,remember:s},success:function(i){var e=i.code,t=i.message,n=i.data;if(200==e)window.location.reload();else if(post_message.show_hide(t),n)for(var s in n)$("#login_"+s).next()[0].innerText=n[s][0]},fail:function(i){console.log("error",i)}})})},register_tran_data:function(){var a=this;a.register.find("#register-submit").click(function(i){i.preventDefault(),a.register.find(".error").each(function(){this.innerText=""});var e=$("#register_username").val(),t=$("#register_telephone").val(),n=$("#register_password1").val(),s=$("#register_password2").val(),r=$("#register_email").val(),o=$("#register_img_verify").val();xfz_ajax.post({url:"/account/register",data:{username:e,telephone:t,password1:n,password2:s,email:r,img_verify:o},success:function(i){var e=i.code,t=i.data;if(200==e)post_message.show_hide(i.message),window.location.reload();else for(var n in post_message.show_hide(i.message),t)$("#register_"+n).next()[0].innerText=t[n][0]}})})},run:function(){this.login_tran_data(),this.register_tran_data(),this.verifycode_click(),this.displayclick(),this.closeclick()}},$(function(){log=new Log({auth:$(".auth"),display_btn:$(".header .right .login")}),log.run()});